# Mathematical Everyday - 使用指南

## 🚀 快速开始

### 1. 配置AI模型

首先复制配置文件模板：
```bash
cp .env.example .env
```

编辑 `.env` 文件，配置你的AI模型：
```env
# 使用DeepSeek (推荐)
DEEPSEEK_API_KEY=sk-your-api-key-here
AI_MODEL=deepseek

# 或使用豆包
# DOUBAO_API_KEY=your-doubao-key-here
# AI_MODEL=doubao
```

### 2. 手动生成问题

```bash
# 生成随机分类的问题
npm run generate-problem

# 生成指定分类的问题
npm start generate-problem -c differential
```

### 3. 手动生成答案

```bash
# 为所有没有答案的问题生成答案
npm run generate-answer

# 为指定文件生成答案
npm start generate-solutions -f questions/differential/2024-01-15-problem.md
```

### 4. 启动自动化调度

```bash
# 启动定时调度器
npm run schedule
```

调度器将：
- 每天09:00自动生成新问题
- 每天09:00为昨天的问题生成答案
- 每6小时检查并补充遗漏的答案

## 📖 命令详解

### 查看帮助
```bash
npm start          # 显示所有可用命令
npm start --help   # 显示帮助信息
```

### 查看分类
```bash
npm start categories
```

输出示例：
```
📚 Available Categories:

🏷️  differential
   Name: 微分学 (Differential Calculus)
   Description: 导数、微分、切线、函数单调性、极值等
   Folder: differential
```

### 查看统计信息
```bash
npm start stats
```

输出示例：
```
📈 Problem Statistics:
  Total problems: 15
  With solutions: 12
  Without solutions: 3

📚 By Category:
  微分学: 5
  积分学: 4
  微分方程: 3

🔄 Repository Status:
  Branch: main
  Modified files: 0
  New files: 0
```

### 测试功能
```bash
npm start test problem   # 测试问题生成
npm start test solution  # 测试答案生成
```

## 📁 生成的文件结构

问题文件存储在 `questions/` 目录下：

```
questions/
├── differential/
│   ├── 2024-01-15-problem.md
│   └── 2024-01-16-problem.md
├── integral/
│   └── 2024-01-15-problem.md
└── ...
```

## 📝 问题文件格式

每个问题文件包含：

```markdown
# 求函数 f(x) = x³ - 3x² + 2x 的极值点

## 📊 题目信息
- **日期**: 2024-01-15
- **分类**: 微分学
- **难度**: 中等
- **来源**: 考研真题风格
- **标签**: `导数`, `极值`, `驻点`

## 📝 题目描述
已知函数 f(x) = x³ - 3x² + 2x，求：
1. 函数的驻点
2. 判断各驻点的性质
3. 求出所有极值点及对应的极值

## 💡 解题提示
1. 先求函数的一阶导数
2. 令一阶导数为0，求出驻点
3. 利用二阶导数判别法判断极值点的性质

## 📚 解答
> 解答将在明天自动生成
```

## 🔧 GitHub自动提交

配置GitHub后，系统会自动：

1. **新问题提交**：
   ```
   Add new 微分学 problem for 2024-01-15
   
   📚 题目: 求函数极值点
   🏷️ 分类: 微分学
   📊 难度: 中等
   🤖 Generated by AI
   ```

2. **答案提交**：
   ```
   Add solution for 微分学 problem
   
   📚 题目: 求函数极值点
   ✅ 解答: Solution added
   📅 日期: 2024-01-16
   🤖 Generated by AI
   ```

## ⚙️ 高级配置

### 自定义生成时间
```env
GENERATE_PROBLEM_TIME=08:00  # 早上8点生成问题
GENERATE_ANSWER_TIME=20:00   # 晚上8点生成答案
TIMEZONE=Asia/Shanghai       # 时区设置
```

### 切换AI模型
```env
# 使用豆包
AI_MODEL=doubao
DOUBAO_API_KEY=your-key

# 使用OpenAI
AI_MODEL=openai
OPENAI_API_KEY=your-key
```

## 🐛 常见问题

### Q: 生成的问题重复了怎么办？
A: 可以手动删除重复文件，AI会尽量避免重复。

### Q: 某个答案生成失败了？
A: 运行 `npm start generate-solutions -f 文件路径` 重新生成。

### Q: 如何修改问题分类？
A: 编辑 `src/utils/categories.js` 文件。

### Q: 调度器停止工作了？
A: 检查日志，重新启动 `npm run schedule`。

## 🔄 维护操作

### 重新生成答案
```bash
# 重新生成特定文件的答案
npm start generate-solutions -f questions/differential/2024-01-15-problem.md
```

### 批量操作
```bash
# 为所有微分学问题生成答案
find questions/differential -name "*.md" -exec npm start generate-solutions -f {} \;
```

### 检查项目状态
```bash
npm start stats  # 查看统计
git status       # 查看git状态
```

## 📊 监控和日志

当使用调度器时，系统会输出详细日志：

```
🚀 Starting Mathematical Everyday Scheduler...
✅ Scheduler started successfully
📅 Problem generation scheduled at: 09:00
📝 Solution generation scheduled at: 09:00
🌍 Timezone: Asia/Shanghai

🎯 Running daily problem generation...
🎲 Generating new daily problem...
✅ Generated problem: 求二元函数的偏导数
📂 Category: 多元微分
📊 Difficulty: 中等
✅ Problem committed to git: a1b2c3d
🚀 Problem pushed to GitHub successfully
```

这样你就可以完全掌握Mathematical Everyday的使用了！🎓
